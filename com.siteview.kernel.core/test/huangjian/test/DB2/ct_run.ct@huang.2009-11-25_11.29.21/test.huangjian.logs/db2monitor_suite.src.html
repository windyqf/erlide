<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>e:/Server/test/huangjian/test/db2monitor_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:-<b>module</b>(db2monitor_SUITE).
    2:
    3:<i>%% Note: This directive should only be used in test suites.</i>
    4:-<b>compile</b>(export_all).
    5:
    6:-<b>include</b>("ct.hrl").
    7:
    8:<i>%%--------------------------------------------------------------------</i>
    9:<i>%% Test server callback functions</i>
<a name="10"></a>   10:<i>%%--------------------------------------------------------------------</i>
   11:
   12:<i>%%--------------------------------------------------------------------</i>
   13:<i>%% Function: suite() -&gt; DefaultData</i>
   14:<i>%% DefaultData: [tuple()]  </i>
   15:<i>%% Description: Require variables and set default values for the suite</i>
   16:<i>%%--------------------------------------------------------------------</i>
<a name=suite>   17:<b>suite</b></a>() -&gt; [{timetrap,{minutes,10}}].
   18:
   19:<i>%%--------------------------------------------------------------------</i>
<a name="20"></a>   20:<i>%% Function: init_per_suite(Config) -&gt; Config</i>
   21:<i>%% Config: [tuple()]</i>
   22:<i>%%   A list of key/value pairs, holding the test case configuration.</i>
   23:<i>%% Description: Initiation before the whole suite</i>
   24:<i>%%</i>
   25:<i>%% Note: This function is free to add any key/value pairs to the Config</i>
   26:<i>%% variable, but should NOT alter/remove any existing entries.</i>
   27:<i>%%--------------------------------------------------------------------</i>
<a name=init_per_suite>   28:<b>init_per_suite</b></a>(Config) -&gt;
   29:    Config.
<a name="30"></a>   30:
   31:<i>%%--------------------------------------------------------------------</i>
   32:<i>%% Function: end_per_suite(Config) -&gt; _</i>
   33:<i>%% Config: [tuple()]</i>
   34:<i>%%   A list of key/value pairs, holding the test case configuration.</i>
   35:<i>%% Description: Cleanup after the whole suite</i>
   36:<i>%%--------------------------------------------------------------------</i>
<a name=end_per_suite>   37:<b>end_per_suite</b></a>(_Config) -&gt;
   38:    ok.
   39:<i>%%--------------------------------------------------------------------</i>
<a name="40"></a>   40:<i>%% Function: all() -&gt; TestCases</i>
   41:<i>%% TestCases: [Case] </i>
   42:<i>%% Case: atom()</i>
   43:<i>%%   Name of a test case.</i>
   44:<i>%% Description: Returns a list of all test cases in this test suite</i>
   45:<i>%%--------------------------------------------------------------------      </i>
<a name=all>   46:<b>all</b></a>() -&gt; 
   47:    [correct_counter_current, correct_counter_all, current_value,
   48:	error_counter_server, error_counter_port, error_counter_user,
   49:	error_counter_password, error_counter_database, error_value_server, 
<a name="50"></a>   50:	error_value_port, error_value_user, error_value_password, 
   51:	error_value_database, error_value_counter].
   52:
   53:
   54:<i>%% Function: sequences() -&gt; Sequences </i>
   55:<i>%%Sequences = [{SeqName,Testcases}]</i>
   56:<i>%%SeqName = atom()</i>
   57:<i>%%Testcases = [atom()]</i>
   58:<i>%% Description: Returns a list of sequenced test cases in this test suite</i>
<a name=sequences>   59:<b>sequences</b></a>() -&gt;
<a name="60"></a>   60:	[].
   61:	
<a name=correct_counter_current>   62:<b>correct_counter_current</b></a>(_Config) -&gt;
   63:	P = db2_monitor:new(),
   64:	Params = [{server, "192.168.0.20"}, {port, 50000}, {user, "db2admin"}, {password, "db2admin"},	{instance, "cy"}, {partition, "-1"}, {timeout, 60}],
   65:	
   66:	Ret = P:getBrowseData(Params),
   67:	
   68:	{comment, Ret}.
   69:	
<a name=correct_counter_all><a name="70"></a>   70:<b>correct_counter_all</b></a>(_Config) -&gt;
   71:	P = db2_monitor:new(),
   72:	Params = [{server, "192.168.0.20"}, {port, 50000}, {user, "db2admin"}, {password, "db2admin"},	{instance, "cy"}, {partition, "-2"}, {timeout, 60}],
   73:	
   74:	Ret = P:getBrowseData(Params),
   75:	
   76:	{comment, Ret}.
   77:	
<a name=current_value>   78:<b>current_value</b></a>(_Config) -&gt;
   79:	P = db2_monitor:new(),	
<a name="80"></a>   80:	P:set_property(server, "192.168.0.20"),
   81:	P:set_property(user, "db2admin"),
   82:	P:set_property(port, 50000),
   83:	P:set_property(timeout, 60),
   84:	P:set_property(partition, "-1"),
   85:	P:set_property(password, "db2admin"),
   86:	P:set_property(instance, "cy"),
   87:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME_S","Application/db2jcc_application/AGENT_SYS_CPU_TIME_S"}]),
   88:
   89:	P:update(),
<a name="90"></a>   90:	
   91:	{ok, {state_string, Good}} = P:get_attribute(state_string),
   92:	
   93:	{comment, Good}.
   94:	
<a name=error_counter_server>   95:<b>error_counter_server</b></a>(_Config) -&gt;
   96:	P = db2_monitor:new(),
   97:	Params = [{server, "192.168.0.2"}, {port, 50000}, {user, "db2admin"}, {password, "db2admin"},	{instance, "cy"}, {partition, "-1"}, {timeout, 60}],
   98:	
   99:	Ret = P:getBrowseData(Params),
<a name="100"></a>  100:	
  101:	{comment, Ret}.
  102:
<a name=error_counter_port>  103:<b>error_counter_port</b></a>(_Config) -&gt;
  104:	P = db2_monitor:new(),
  105:	Params = [{server, "192.168.0.20"}, {port, 5000}, {user, "db2admin"}, {password, "db2admin"},	{instance, "cy"}, {partition, "-1"}, {timeout, 60}],
  106:	
  107:	Ret = P:getBrowseData(Params),
  108:	
  109:	{comment, Ret}.
<a name="110"></a>  110:
<a name=error_counter_user>  111:<b>error_counter_user</b></a>(_Config) -&gt;
  112:	P = db2_monitor:new(),
  113:	Params = [{server, "192.168.0.20"}, {port, 50000}, {user, "db2admi"}, {password, "db2admin"},	{instance, "cy"}, {partition, "-1"}, {timeout, 60}],
  114:	
  115:	Ret = P:getBrowseData(Params),
  116:	
  117:	{comment, Ret}.
  118:	
  119:	
<a name=error_counter_password><a name="120"></a>  120:<b>error_counter_password</b></a>(_Config) -&gt;
  121:	P = db2_monitor:new(),
  122:	Params = [{server, "192.168.0.20"}, {port, 50000}, {user, "db2admin"}, {password, "db2admi"},	{instance, "cy"}, {partition, "-1"}, {timeout, 60}],
  123:	
  124:	Ret = P:getBrowseData(Params),
  125:	
  126:	{comment, Ret}.
  127:
<a name=error_counter_database>  128:<b>error_counter_database</b></a>(_Config) -&gt;
  129:	P = db2_monitor:new(),
<a name="130"></a>  130:	Params = [{server, "192.168.0.20"}, {port, 50000}, {user, "db2admin"}, {password, "db2admin"},	{instance, "c"}, {partition, "-1"}, {timeout, 60}],
  131:	
  132:	Ret = P:getBrowseData(Params),
  133:	
  134:	{comment, Ret}.
  135:
<a name=error_value_server>  136:<b>error_value_server</b></a>(_Config) -&gt;
  137:	P = db2_monitor:new(),	
  138:	P:set_property(server, "192.168.0.2"),
  139:	P:set_property(user, "db2admin"),
<a name="140"></a>  140:	P:set_property(port, 50000),
  141:	P:set_property(timeout, 60),
  142:	P:set_property(partition, "-1"),
  143:	P:set_property(password, "db2admin"),
  144:	P:set_property(instance, "cy"),
  145:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME_S","Application/db2jcc_application/AGENT_SYS_CPU_TIME_S"}]),
  146:
  147:	P:update(),
  148:	
  149:	{ok, {state_string, Good}} = P:get_attribute(state_string),
<a name="150"></a>  150:	
  151:	{comment, Good}.
  152:	
<a name=error_value_port>  153:<b>error_value_port</b></a>(_Config) -&gt;
  154:	P = db2_monitor:new(),	
  155:	P:set_property(server, "192.168.0.20"),
  156:	P:set_property(user, "db2admin"),
  157:	P:set_property(port, 5000),
  158:	P:set_property(timeout, 60),
  159:	P:set_property(partition, "-1"),
<a name="160"></a>  160:	P:set_property(password, "db2admin"),
  161:	P:set_property(instance, "cy"),
  162:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME_S","Application/db2jcc_application/AGENT_SYS_CPU_TIME_S"}]),
  163:
  164:	P:update(),
  165:	
  166:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  167:	
  168:	{comment, Good}.
  169:	
<a name=error_value_user><a name="170"></a>  170:<b>error_value_user</b></a>(_Config) -&gt;
  171:	P = db2_monitor:new(),	
  172:	P:set_property(server, "192.168.0.20"),
  173:	P:set_property(user, "db2admi"),
  174:	P:set_property(port, 50000),
  175:	P:set_property(timeout, 60),
  176:	P:set_property(partition, "-1"),
  177:	P:set_property(password, "db2admin"),
  178:	P:set_property(instance, "cy"),
  179:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME_S","Application/db2jcc_application/AGENT_SYS_CPU_TIME_S"}]),
<a name="180"></a>  180:
  181:	P:update(),
  182:	
  183:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  184:	
  185:	{comment, Good}.
  186:	
<a name=error_value_password>  187:<b>error_value_password</b></a>(_Config) -&gt;
  188:	P = db2_monitor:new(),	
  189:	P:set_property(server, "192.168.0.20"),
<a name="190"></a>  190:	P:set_property(user, "db2admin"),
  191:	P:set_property(port, 50000),
  192:	P:set_property(timeout, 60),
  193:	P:set_property(partition, "-1"),
  194:	P:set_property(password, "db2admi"),
  195:	P:set_property(instance, "cy"),
  196:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME_S","Application/db2jcc_application/AGENT_SYS_CPU_TIME_S"}]),
  197:
  198:	P:update(),
  199:	
<a name="200"></a>  200:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  201:	
  202:	{comment, Good}.
  203:	
<a name=error_value_database>  204:<b>error_value_database</b></a>(_Config) -&gt;
  205:	P = db2_monitor:new(),	
  206:	P:set_property(server, "192.168.0.20"),
  207:	P:set_property(user, "db2admin"),
  208:	P:set_property(port, 50000),
  209:	P:set_property(timeout, 60),
<a name="210"></a>  210:	P:set_property(partition, "-1"),
  211:	P:set_property(password, "db2admin"),
  212:	P:set_property(instance, "c"),
  213:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME_S","Application/db2jcc_application/AGENT_SYS_CPU_TIME_S"}]),
  214:
  215:	P:update(),
  216:	
  217:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  218:	
  219:	{comment, Good}.
<a name="220"></a>  220:	
<a name=error_value_counter>  221:<b>error_value_counter</b></a>(_Config) -&gt;
  222:	P = db2_monitor:new(),	
  223:	P:set_property(server, "192.168.0.20"),
  224:	P:set_property(user, "db2admin"),
  225:	P:set_property(port, 50000),
  226:	P:set_property(timeout, 60),
  227:	P:set_property(partition, "-1"),
  228:	P:set_property(password, "db2admin"),
  229:	P:set_property(instance, "cy"),
<a name="230"></a>  230:	P:set_property(browse, [{"Application|||db2jcc_application|||AGENT_SYS_CPU_TIME","Application/db2jcc_application/AGENT_SYS_CPU_TIME"}]),
  231:
  232:	P:update(),
  233:	
  234:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  235:	
  236:	{comment, Good}.
  237:		
  238:	
</pre>
<hr size=1><i>The transformation of this file (239 lines) took 0.00 seconds</i><br>
</body>
</html>
