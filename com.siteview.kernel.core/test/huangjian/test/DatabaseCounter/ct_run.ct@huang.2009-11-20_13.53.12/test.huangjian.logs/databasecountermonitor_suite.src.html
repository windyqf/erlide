<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>e:/Server/test/huangjian/test/databasecountermonitor_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:-<b>module</b>(databasecountermonitor_SUITE).
    2:
    3:<i>%% Note: This directive should only be used in test suites.</i>
    4:-<b>compile</b>(export_all).
    5:
    6:-<b>include</b>("ct.hrl").
    7:
    8:<i>%%--------------------------------------------------------------------</i>
    9:<i>%% Test server callback functions</i>
<a name="10"></a>   10:<i>%%--------------------------------------------------------------------</i>
   11:
   12:<i>%%--------------------------------------------------------------------</i>
   13:<i>%% Function: suite() -&gt; DefaultData</i>
   14:<i>%% DefaultData: [tuple()]  </i>
   15:<i>%% Description: Require variables and set default values for the suite</i>
   16:<i>%%--------------------------------------------------------------------</i>
<a name=suite>   17:<b>suite</b></a>() -&gt; [{timetrap,{minutes,10}}].
   18:
   19:<i>%%--------------------------------------------------------------------</i>
<a name="20"></a>   20:<i>%% Function: init_per_suite(Config) -&gt; Config</i>
   21:<i>%% Config: [tuple()]</i>
   22:<i>%%   A list of key/value pairs, holding the test case configuration.</i>
   23:<i>%% Description: Initiation before the whole suite</i>
   24:<i>%%</i>
   25:<i>%% Note: This function is free to add any key/value pairs to the Config</i>
   26:<i>%% variable, but should NOT alter/remove any existing entries.</i>
   27:<i>%%--------------------------------------------------------------------</i>
<a name=init_per_suite>   28:<b>init_per_suite</b></a>(Config) -&gt;
   29:    Config.
<a name="30"></a>   30:
   31:<i>%%--------------------------------------------------------------------</i>
   32:<i>%% Function: end_per_suite(Config) -&gt; _</i>
   33:<i>%% Config: [tuple()]</i>
   34:<i>%%   A list of key/value pairs, holding the test case configuration.</i>
   35:<i>%% Description: Cleanup after the whole suite</i>
   36:<i>%%--------------------------------------------------------------------</i>
<a name=end_per_suite>   37:<b>end_per_suite</b></a>(_Config) -&gt;
   38:    ok.
   39:<i>%%--------------------------------------------------------------------</i>
<a name="40"></a>   40:<i>%% Function: all() -&gt; TestCases</i>
   41:<i>%% TestCases: [Case] </i>
   42:<i>%% Case: atom()</i>
   43:<i>%%   Name of a test case.</i>
   44:<i>%% Description: Returns a list of all test cases in this test suite</i>
   45:<i>%%--------------------------------------------------------------------      </i>
<a name=all>   46:<b>all</b></a>() -&gt; 
   47:    [correct_counter, correct_value_no_cummulat_no_diveder, correct_value_no_diveder,
   48:	correct_value_no_cummulat, correct_value_no_divide_query, correct_value_no_cummulat_have_divide_query,
   49:	correct_value_have_divide_query, correct_value_no_divide_have_divide_query, 
<a name="50"></a>   50:	correct_value_no_divide_have_divide_query,
   51:	error_counter_driver, error_counter_url, error_counter_pquery, error_counter_user,
   52:	error_counter_password, error_counter_dquery, error_value_driver, error_value_url,
   53:	error_value_pquery, error_value_user, error_value_password, error_value_dquery].
   54:
   55:<i>%% Function: sequences() -&gt; Sequences </i>
   56:<i>%%Sequences = [{SeqName,Testcases}]</i>
   57:<i>%%SeqName = atom()</i>
   58:<i>%%Testcases = [atom()]</i>
   59:<i>%% Description: Returns a list of sequenced test cases in this test suite</i>
<a name=sequences><a name="60"></a>   60:<b>sequences</b></a>() -&gt;
   61:	[].
   62:
<a name=correct_counter>   63:<b>correct_counter</b></a>(_Config) -&gt;
   64:	P = database_counter_monitor:new(),
   65:	Params = [{driver, "com.mysql.jdbc.Driver"}, {connection_url, "192.168.0.50:3306/mysql"}, {pquery, "select * from cy"},
   66:				{user, "root"}, {password, "888888"}, {divisor_query, ""}, {connection_timeout, 60}, {query_timeout, 60},
   67:				{no_cumulative, false}, {no_divisor, false}],
   68:	
   69:	Ret = P:getBrowseData(Params),
<a name="70"></a>   70:	
   71:	{comment, Ret}.
   72:	
<a name=correct_value_no_cummulat_no_diveder>   73:<b>correct_value_no_cummulat_no_diveder</b></a>(_Config) -&gt;	
   74:	P = database_counter_monitor:new(),
   75:	P:set_property(driver, "com.mysql.jdbc.Driver"),
   76:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
   77:	P:set_property(pquery, "select * from cy"),
   78:	P:set_property(user, "root"),
   79:	P:set_property(password, "888888"),
<a name="80"></a>   80:	P:set_property(divisor_query, ""),
   81:	P:set_property(connection_timeout, 60),
   82:	P:set_property(query_timeout, 60),
   83:	P:set_property(no_cumulative, false),
   84:	P:set_property(no_divisor, false),
   85:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
   86:	P:set_attribute(last_measurements, {empty, []}),
   87:	
   88:	P:update(),
   89:	
<a name="90"></a>   90:	{ok, {state_string, Good}} = P:get_attribute(state_string),
   91:	
   92:	{comment, Good}.
   93:	
<a name=correct_value_no_diveder>   94:<b>correct_value_no_diveder</b></a>(_Config) -&gt;	
   95:	P = database_counter_monitor:new(),
   96:	P:set_property(driver, "com.mysql.jdbc.Driver"),
   97:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
   98:	P:set_property(pquery, "select * from cy"),
   99:	P:set_property(user, "root"),
<a name="100"></a>  100:	P:set_property(password, "888888"),
  101:	P:set_property(divisor_query, ""),
  102:	P:set_property(connection_timeout, 60),
  103:	P:set_property(query_timeout, 60),
  104:	P:set_property(no_cumulative, true),
  105:	P:set_property(no_divisor, false),
  106:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  107:	P:set_attribute(last_measurements, {empty, []}),
  108:	
  109:	P:update(),
<a name="110"></a>  110:	
  111:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  112:	
  113:	{comment, Good}.
  114:	
<a name=correct_value_no_cummulat>  115:<b>correct_value_no_cummulat</b></a>(_Config) -&gt;	
  116:	P = database_counter_monitor:new(),
  117:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  118:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  119:	P:set_property(pquery, "select * from cy"),
<a name="120"></a>  120:	P:set_property(user, "root"),
  121:	P:set_property(password, "888888"),
  122:	P:set_property(divisor_query, ""),
  123:	P:set_property(connection_timeout, 60),
  124:	P:set_property(query_timeout, 60),
  125:	P:set_property(no_cumulative, false),
  126:	P:set_property(no_divisor, true),
  127:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  128:	P:set_attribute(last_measurements, {empty, []}),
  129:	
<a name="130"></a>  130:	P:update(),
  131:	
  132:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  133:	
  134:	{comment, Good}.
  135:	
<a name=correct_value_no_divide_query>  136:<b>correct_value_no_divide_query</b></a>(_Config) -&gt;	
  137:	P = database_counter_monitor:new(),
  138:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  139:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
<a name="140"></a>  140:	P:set_property(pquery, "select * from cy"),
  141:	P:set_property(user, "root"),
  142:	P:set_property(password, "888888"),
  143:	P:set_property(divisor_query, ""),
  144:	P:set_property(connection_timeout, 60),
  145:	P:set_property(query_timeout, 60),
  146:	P:set_property(no_cumulative, true),
  147:	P:set_property(no_divisor, true),
  148:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  149:	P:set_attribute(last_measurements, {empty, []}),
<a name="150"></a>  150:	
  151:	P:update(),
  152:	
  153:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  154:	
  155:	{comment, Good}.
  156:			
<a name=correct_value_no_cummulat_have_divide_query>  157:<b>correct_value_no_cummulat_have_divide_query</b></a>(_Config) -&gt;	
  158:	P = database_counter_monitor:new(),
  159:	P:set_property(driver, "com.mysql.jdbc.Driver"),
<a name="160"></a>  160:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  161:	P:set_property(pquery, "select * from cy"),
  162:	P:set_property(user, "root"),
  163:	P:set_property(password, "888888"),
  164:	P:set_property(divisor_query, "select * from hj"),
  165:	P:set_property(connection_timeout, 60),
  166:	P:set_property(query_timeout, 60),
  167:	P:set_property(no_cumulative, false),
  168:	P:set_property(no_divisor, true),
  169:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
<a name="170"></a>  170:	P:set_attribute(last_measurements, {empty, []}),
  171:	
  172:	P:update(),
  173:	
  174:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  175:	
  176:	{comment, Good}.
  177:
<a name=correct_value_have_divide_query>  178:<b>correct_value_have_divide_query</b></a>(_Config) -&gt;	
  179:	P = database_counter_monitor:new(),
<a name="180"></a>  180:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  181:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  182:	P:set_property(pquery, "select * from cy"),
  183:	P:set_property(user, "root"),
  184:	P:set_property(password, "888888"),
  185:	P:set_property(divisor_query, "select * from hj"),
  186:	P:set_property(connection_timeout, 60),
  187:	P:set_property(query_timeout, 60),
  188:	P:set_property(no_cumulative, true),
  189:	P:set_property(no_divisor, true),
<a name="190"></a>  190:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  191:	P:set_attribute(last_measurements, {empty, []}),
  192:	
  193:	P:update(),
  194:	
  195:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  196:	
  197:	{comment, Good}.
  198:	
<a name=correct_value_no_divide_have_divide_query>  199:<b>correct_value_no_divide_have_divide_query</b></a>(_Config) -&gt;	
<a name="200"></a>  200:	P = database_counter_monitor:new(),
  201:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  202:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  203:	P:set_property(pquery, "select * from cy"),
  204:	P:set_property(user, "root"),
  205:	P:set_property(password, "888888"),
  206:	P:set_property(divisor_query, "select * from hj"),
  207:	P:set_property(connection_timeout, 60),
  208:	P:set_property(query_timeout, 60),
  209:	P:set_property(no_cumulative, true),
<a name="210"></a>  210:	P:set_property(no_divisor, false),
  211:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  212:	P:set_attribute(last_measurements, {empty, []}),
  213:	
  214:	P:update(),
  215:	
  216:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  217:	
  218:	{comment, Good}.
  219:		
<a name=correct_value_no_cumulate_no_divide_have_divide_query><a name="220"></a>  220:<b>correct_value_no_cumulate_no_divide_have_divide_query</b></a>(_Config) -&gt;	
  221:	P = database_counter_monitor:new(),
  222:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  223:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  224:	P:set_property(pquery, "select * from cy"),
  225:	P:set_property(user, "root"),
  226:	P:set_property(password, "888888"),
  227:	P:set_property(divisor_query, "select * from hj"),
  228:	P:set_property(connection_timeout, 60),
  229:	P:set_property(query_timeout, 60),
<a name="230"></a>  230:	P:set_property(no_cumulative, false),
  231:	P:set_property(no_divisor, false),
  232:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  233:	P:set_attribute(last_measurements, {empty, []}),
  234:	
  235:	P:update(),
  236:	
  237:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  238:	
  239:	{comment, Good}.	
<a name="240"></a>  240:	
  241:	
<a name=error_counter_driver>  242:<b>error_counter_driver</b></a>(_Config) -&gt;
  243:	P = database_counter_monitor:new(),
  244:	Params = [{driver, "com.mysql.jdbc.Drive"}, {connection_url, "192.168.0.50:3306/mysql"}, {pquery, "select * from cy"},
  245:				{user, "root"}, {password, "888888"}, {divisor_query, ""}, {connection_timeout, 60}, {query_timeout, 60},
  246:				{no_cumulative, false}, {no_divisor, false}],
  247:	
  248:	Ret = P:getBrowseData(Params),
  249:	
<a name="250"></a>  250:	{comment, Ret}.
  251:	
<a name=error_counter_url>  252:<b>error_counter_url</b></a>(_Config) -&gt;
  253:	P = database_counter_monitor:new(),
  254:	Params = [{driver, "com.mysql.jdbc.Driver"}, {connection_url, "192.168.0.51:3306/mysql"}, {pquery, "select * from cy"},
  255:				{user, "root"}, {password, "888888"}, {divisor_query, ""}, {connection_timeout, 60}, {query_timeout, 60},
  256:				{no_cumulative, false}, {no_divisor, false}],
  257:	
  258:	Ret = P:getBrowseData(Params),
  259:	
<a name="260"></a>  260:	{comment, Ret}.	
  261:	
<a name=error_counter_pquery>  262:<b>error_counter_pquery</b></a>(_Config) -&gt;
  263:	P = database_counter_monitor:new(),
  264:	Params = [{driver, "com.mysql.jdbc.Driver"}, {connection_url, "192.168.0.50:3306/mysql"}, {pquery, "select * from c"},
  265:				{user, "root"}, {password, "888888"}, {divisor_query, ""}, {connection_timeout, 60}, {query_timeout, 60},
  266:				{no_cumulative, false}, {no_divisor, false}],
  267:	
  268:	Ret = P:getBrowseData(Params),
  269:	
<a name="270"></a>  270:	{comment, Ret}.	
  271:	
<a name=error_counter_user>  272:<b>error_counter_user</b></a>(_Config) -&gt;
  273:	P = database_counter_monitor:new(),
  274:	Params = [{driver, "com.mysql.jdbc.Driver"}, {connection_url, "192.168.0.50:3306/mysql"}, {pquery, "select * from cy"},
  275:				{user, "roo"}, {password, "888888"}, {divisor_query, ""}, {connection_timeout, 60}, {query_timeout, 60},
  276:				{no_cumulative, false}, {no_divisor, false}],
  277:	
  278:	Ret = P:getBrowseData(Params),
  279:	
<a name="280"></a>  280:	{comment, Ret}.
  281:
<a name=error_counter_password>  282:<b>error_counter_password</b></a>(_Config) -&gt;
  283:	P = database_counter_monitor:new(),
  284:	Params = [{driver, "com.mysql.jdbc.Driver"}, {connection_url, "192.168.0.50:3306/mysql"}, {pquery, "select * from cy"},
  285:				{user, "root"}, {password, "88888"}, {divisor_query, ""}, {connection_timeout, 60}, {query_timeout, 60},
  286:				{no_cumulative, false}, {no_divisor, false}],
  287:	
  288:	Ret = P:getBrowseData(Params),
  289:	
<a name="290"></a>  290:	{comment, Ret}.
  291:	
<a name=error_counter_dquery>  292:<b>error_counter_dquery</b></a>(_Config) -&gt;
  293:	P = database_counter_monitor:new(),
  294:	Params = [{driver, "com.mysql.jdbc.Driver"}, {connection_url, "192.168.0.50:3306/mysql"}, {pquery, "select * from cy"},
  295:				{user, "root"}, {password, "888888"}, {divisor_query, "select * from kk"}, {connection_timeout, 60}, {query_timeout, 60},
  296:				{no_cumulative, false}, {no_divisor, false}],
  297:	
  298:	Ret = P:getBrowseData(Params),
  299:	
<a name="300"></a>  300:	{comment, Ret}.
  301:	
<a name=error_value_driver>  302:<b>error_value_driver</b></a>(_Config) -&gt;	
  303:	P = database_counter_monitor:new(),
  304:	P:set_property(driver, "com.mysql.jdbc.Drive"),
  305:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  306:	P:set_property(pquery, "select * from cy"),
  307:	P:set_property(user, "root"),
  308:	P:set_property(password, "888888"),
  309:	P:set_property(divisor_query, ""),
<a name="310"></a>  310:	P:set_property(connection_timeout, 60),
  311:	P:set_property(query_timeout, 60),
  312:	P:set_property(no_cumulative, false),
  313:	P:set_property(no_divisor, false),
  314:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  315:	P:set_attribute(last_measurements, {empty, []}),
  316:	
  317:	P:update(),
  318:	
  319:	{ok, {state_string, Good}} = P:get_attribute(state_string),
<a name="320"></a>  320:	
  321:	{comment, Good}.
  322:		
<a name=error_value_url>  323:<b>error_value_url</b></a>(_Config) -&gt;	
  324:	P = database_counter_monitor:new(),
  325:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  326:	P:set_property(connection_url, "192.168.0.50:3306/mysq"),
  327:	P:set_property(pquery, "select * from cy"),
  328:	P:set_property(user, "root"),
  329:	P:set_property(password, "888888"),
<a name="330"></a>  330:	P:set_property(divisor_query, ""),
  331:	P:set_property(connection_timeout, 60),
  332:	P:set_property(query_timeout, 60),
  333:	P:set_property(no_cumulative, false),
  334:	P:set_property(no_divisor, false),
  335:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  336:	P:set_attribute(last_measurements, {empty, []}),
  337:	
  338:	P:update(),
  339:	
<a name="340"></a>  340:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  341:	
  342:	{comment, Good}.
  343:
<a name=error_value_pquery>  344:<b>error_value_pquery</b></a>(_Config) -&gt;	
  345:	P = database_counter_monitor:new(),
  346:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  347:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  348:	P:set_property(pquery, "select * from c"),
  349:	P:set_property(user, "root"),
<a name="350"></a>  350:	P:set_property(password, "888888"),
  351:	P:set_property(divisor_query, ""),
  352:	P:set_property(connection_timeout, 60),
  353:	P:set_property(query_timeout, 60),
  354:	P:set_property(no_cumulative, false),
  355:	P:set_property(no_divisor, false),
  356:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  357:	P:set_attribute(last_measurements, {empty, []}),
  358:	
  359:	P:update(),
<a name="360"></a>  360:	
  361:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  362:	
  363:	{comment, Good}.
  364:	
<a name=error_value_user>  365:<b>error_value_user</b></a>(_Config) -&gt;	
  366:	P = database_counter_monitor:new(),
  367:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  368:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  369:	P:set_property(pquery, "select * from cy"),
<a name="370"></a>  370:	P:set_property(user, "roo"),
  371:	P:set_property(password, "888888"),
  372:	P:set_property(divisor_query, ""),
  373:	P:set_property(connection_timeout, 60),
  374:	P:set_property(query_timeout, 60),
  375:	P:set_property(no_cumulative, false),
  376:	P:set_property(no_divisor, false),
  377:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  378:	P:set_attribute(last_measurements, {empty, []}),
  379:	
<a name="380"></a>  380:	P:update(),
  381:	
  382:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  383:	
  384:	{comment, Good}.
  385:
<a name=error_value_password>  386:<b>error_value_password</b></a>(_Config) -&gt;	
  387:	P = database_counter_monitor:new(),
  388:	P:set_property(driver, "com.mysql.jdbc.Driver"),
  389:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
<a name="390"></a>  390:	P:set_property(pquery, "select * from cy"),
  391:	P:set_property(user, "root"),
  392:	P:set_property(password, "88888"),
  393:	P:set_property(divisor_query, ""),
  394:	P:set_property(connection_timeout, 60),
  395:	P:set_property(query_timeout, 60),
  396:	P:set_property(no_cumulative, false),
  397:	P:set_property(no_divisor, false),
  398:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
  399:	P:set_attribute(last_measurements, {empty, []}),
<a name="400"></a>  400:	
  401:	P:update(),
  402:	
  403:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  404:	
  405:	{comment, Good}.
  406:	
<a name=error_value_dquery>  407:<b>error_value_dquery</b></a>(_Config) -&gt;	
  408:	P = database_counter_monitor:new(),
  409:	P:set_property(driver, "com.mysql.jdbc.Drive"),
<a name="410"></a>  410:	P:set_property(connection_url, "192.168.0.50:3306/mysql"),
  411:	P:set_property(pquery, "select * from cy"),
  412:	P:set_property(user, "root"),
  413:	P:set_property(password, "888888"),
  414:	P:set_property(divisor_query, "select * from kk"),
  415:	P:set_property(connection_timeout, 60),
  416:	P:set_property(query_timeout, 60),
  417:	P:set_property(no_cumulative, false),
  418:	P:set_property(no_divisor, false),
  419:	P:set_property(browse, [{"0|||cy2", "0/cy2"}]),
<a name="420"></a>  420:	P:set_attribute(last_measurements, {empty, []}),
  421:	
  422:	P:update(),
  423:	
  424:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  425:	
  426:	{comment, Good}.
  427:		
</pre>
<hr size=1><i>The transformation of this file (428 lines) took 0.00 seconds</i><br>
</body>
</html>
