<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head><title>e:/Server/test/huangjian/test/ftp_SUITE.erl</title></head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
    1:-<b>module</b>(ftp_SUITE).
    2:
    3:<i>%% Note: This directive should only be used in test suites.</i>
    4:-<b>compile</b>(export_all).
    5:
    6:-<b>include</b>("ct.hrl").
    7:
    8:<i>%%--------------------------------------------------------------------</i>
    9:<i>%% Test server callback functions</i>
<a name="10"></a>   10:<i>%%--------------------------------------------------------------------</i>
   11:
   12:<i>%%--------------------------------------------------------------------</i>
   13:<i>%% Function: suite() -&gt; DefaultData</i>
   14:<i>%% DefaultData: [tuple()]  </i>
   15:<i>%% Description: Require variables and set default values for the suite</i>
   16:<i>%%--------------------------------------------------------------------</i>
<a name=suite>   17:<b>suite</b></a>() -&gt; [{timetrap,{minutes,1}}].
   18:
   19:<i>%%--------------------------------------------------------------------</i>
<a name="20"></a>   20:<i>%% Function: init_per_suite(Config) -&gt; Config</i>
   21:<i>%% Config: [tuple()]</i>
   22:<i>%%   A list of key/value pairs, holding the test case configuration.</i>
   23:<i>%% Description: Initiation before the whole suite</i>
   24:<i>%%</i>
   25:<i>%% Note: This function is free to add any key/value pairs to the Config</i>
   26:<i>%% variable, but should NOT alter/remove any existing entries.</i>
   27:<i>%%--------------------------------------------------------------------</i>
<a name=init_per_suite>   28:<b>init_per_suite</b></a>(Config) -&gt;
   29:    Config.
<a name="30"></a>   30:
   31:<i>%%--------------------------------------------------------------------</i>
   32:<i>%% Function: end_per_suite(Config) -&gt; _</i>
   33:<i>%% Config: [tuple()]</i>
   34:<i>%%   A list of key/value pairs, holding the test case configuration.</i>
   35:<i>%% Description: Cleanup after the whole suite</i>
   36:<i>%%--------------------------------------------------------------------</i>
<a name=end_per_suite>   37:<b>end_per_suite</b></a>(_Config) -&gt;
   38:    ok.
   39:<i>%%--------------------------------------------------------------------</i>
<a name="40"></a>   40:<i>%% Function: all() -&gt; TestCases</i>
   41:<i>%% TestCases: [Case] </i>
   42:<i>%% Case: atom()</i>
   43:<i>%%   Name of a test case.</i>
   44:<i>%% Description: Returns a list of all test cases in this test suite</i>
   45:<i>%%--------------------------------------------------------------------      </i>
<a name=all>   46:<b>all</b></a>() -&gt; 
   47:    [correct_active_no_proxy_content, correct_active_no_proxy,
   48:	correct_passive_no_proxy_content, correct_passive_no_proxy,
   49:	correct_proxy_no_content,
<a name="50"></a>   50:	error_host, error_user, error_passwd, 
   51:	error_content, error_proxy, error_proxyuser,
   52:	error_proxypass, error_file].
   53:
   54:<i>%% Function: sequences() -&gt; Sequences </i>
   55:<i>%%Sequences = [{SeqName,Testcases}]</i>
   56:<i>%%SeqName = atom()</i>
   57:<i>%%Testcases = [atom()]</i>
   58:<i>%% Description: Returns a list of sequenced test cases in this test suite</i>
<a name=sequences>   59:<b>sequences</b></a>() -&gt;
<a name="60"></a>   60:	[].
   61:	
   62:<i>%%-------------------------------------------------------------------------</i>
   63:<i>%% Test cases starts here.</i>
   64:<i>%%-------------------------------------------------------------------------</i>
   65:
<a name=correct_active_no_proxy_content>   66:<b>correct_active_no_proxy_content</b></a>(_Config) -&gt;
   67:	P = ftp_monitor:new(),
   68:	P:set_property(timeout, 10),
   69:	P:set_property(username, "intel"),
<a name="70"></a>   70:	P:set_property(password, "intel"),
   71:	P:set_property(contentmatch, ""),
   72:	P:set_property(ftpproxy, ""),
   73:	P:set_property(mode, true),
   74:	P:set_property(pcheckcontent, "nil"),
   75:	P:set_property(proxyusername, ""),
   76:	P:set_property(proxypassword, ""),
   77:	P:set_property(ftpserver, "192.168.0.1"),
   78:	P:set_property(file, "1.txt"),
   79:	
<a name="80"></a>   80:	P:update(),
   81:	
   82:	{ok, {state_string, Good}} = P:get_attribute(state_string),
   83:	
   84:	{comment, Good}.
   85:
<a name=correct_active_no_proxy>   86:<b>correct_active_no_proxy</b></a>(_Config) -&gt;
   87:	P = ftp_monitor:new(),
   88:	P:set_property(timeout, 10),
   89:	P:set_property(username, "intel"),
<a name="90"></a>   90:	P:set_property(password, "intel"),
   91:	P:set_property(contentmatch, "Server"),
   92:	P:set_property(ftpproxy, ""),
   93:	P:set_property(mode, true),
   94:	P:set_property(pcheckcontent, "nil"),
   95:	P:set_property(proxyusername, ""),
   96:	P:set_property(proxypassword, ""),
   97:	P:set_property(ftpserver, "192.168.0.1"),
   98:	P:set_property(file, "1.txt"),
   99:	
<a name="100"></a>  100:	P:update(),
  101:	
  102:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  103:	
  104:	{comment, Good}.
  105:	
<a name=correct_passive_no_proxy_content>  106:<b>correct_passive_no_proxy_content</b></a>(_Config) -&gt;
  107:	P = ftp_monitor:new(),
  108:	P:set_property(timeout, 10),
  109:	P:set_property(username, "intel"),
<a name="110"></a>  110:	P:set_property(password, "intel"),
  111:	P:set_property(contentmatch, ""),
  112:	P:set_property(ftpproxy, ""),
  113:	P:set_property(mode, false),
  114:	P:set_property(pcheckcontent, "nil"),
  115:	P:set_property(proxyusername, ""),
  116:	P:set_property(proxypassword, ""),
  117:	P:set_property(ftpserver, "192.168.0.1"),
  118:	P:set_property(file, "1.txt"),
  119:	
<a name="120"></a>  120:	P:update(),
  121:	
  122:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  123:	
  124:	{comment, Good}.
  125:		
<a name=correct_passive_no_proxy>  126:<b>correct_passive_no_proxy</b></a>(_Config) -&gt;
  127:	P = ftp_monitor:new(),
  128:	P:set_property(timeout, 10),
  129:	P:set_property(username, "intel"),
<a name="130"></a>  130:	P:set_property(password, "intel"),
  131:	P:set_property(contentmatch, "Server"),
  132:	P:set_property(ftpproxy, ""),
  133:	P:set_property(mode, false),
  134:	P:set_property(pcheckcontent, "nil"),
  135:	P:set_property(proxyusername, ""),
  136:	P:set_property(proxypassword, ""),
  137:	P:set_property(ftpserver, "192.168.0.1"),
  138:	P:set_property(file, "1.txt"),
  139:	
<a name="140"></a>  140:	P:update(),
  141:	
  142:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  143:	
  144:	{comment, Good}.
  145:	
<a name=correct_proxy_no_content>  146:<b>correct_proxy_no_content</b></a>(_Config) -&gt;
  147:	P = ftp_monitor:new(),
  148:	P:set_property(timeout, 10),
  149:	P:set_property(username, "intel"),
<a name="150"></a>  150:	P:set_property(password, "intel"),
  151:	P:set_property(contentmatch, ""),
  152:	P:set_property(ftpproxy, "192.168.0.225:3128"),
  153:	P:set_property(mode, false),
  154:	P:set_property(pcheckcontent, "nil"),
  155:	P:set_property(proxyusername, "me"),
  156:	P:set_property(proxypassword, "me"),
  157:	P:set_property(ftpserver, "192.168.0.1"),
  158:	P:set_property(file, "1.txt"),
  159:	
<a name="160"></a>  160:	P:update(),
  161:	
  162:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  163:	
  164:	{comment, Good}.	
  165:
<a name=error_host>  166:<b>error_host</b></a>(_Config) -&gt;
  167:	P = ftp_monitor:new(),
  168:	P:set_property(timeout, 10),
  169:	P:set_property(username, "intel"),
<a name="170"></a>  170:	P:set_property(password, "intel"),
  171:	P:set_property(contentmatch, ""),
  172:	P:set_property(ftpproxy, ""),
  173:	P:set_property(mode, false),
  174:	P:set_property(pcheckcontent, "nil"),
  175:	P:set_property(proxyusername, ""),
  176:	P:set_property(proxypassword, ""),
  177:	P:set_property(ftpserver, "192.168.0.2"),
  178:	P:set_property(file, "1.txt"),
  179:	
<a name="180"></a>  180:	P:update(),
  181:	
  182:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  183:	
  184:	{comment, Good}.
  185:
<a name=error_user>  186:<b>error_user</b></a>(_Config) -&gt;
  187:	P = ftp_monitor:new(),
  188:	P:set_property(timeout, 10),
  189:	P:set_property(username, "inte"),
<a name="190"></a>  190:	P:set_property(password, "intel"),
  191:	P:set_property(contentmatch, ""),
  192:	P:set_property(ftpproxy, ""),
  193:	P:set_property(mode, false),
  194:	P:set_property(pcheckcontent, "nil"),
  195:	P:set_property(proxyusername, ""),
  196:	P:set_property(proxypassword, ""),
  197:	P:set_property(ftpserver, "192.168.0.1"),
  198:	P:set_property(file, "1.txt"),
  199:	
<a name="200"></a>  200:	P:update(),
  201:	
  202:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  203:	
  204:	{comment, Good}.
  205:
<a name=error_passwd>  206:<b>error_passwd</b></a>(_Config) -&gt; 
  207:	P = ftp_monitor:new(),
  208:	P:set_property(timeout, 10),
  209:	P:set_property(username, "intel"),
<a name="210"></a>  210:	P:set_property(password, "inte"),
  211:	P:set_property(contentmatch, ""),
  212:	P:set_property(ftpproxy, ""),
  213:	P:set_property(mode, false),
  214:	P:set_property(pcheckcontent, "nil"),
  215:	P:set_property(proxyusername, ""),
  216:	P:set_property(proxypassword, ""),
  217:	P:set_property(ftpserver, "192.168.0.1"),
  218:	P:set_property(file, "1.txt"),
  219:	
<a name="220"></a>  220:	P:update(),
  221:	
  222:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  223:	
  224:	{comment, Good}.
  225:
<a name=error_content>  226:<b>error_content</b></a>(_Config) -&gt;
  227:	P = ftp_monitor:new(),
  228:	P:set_property(timeout, 10),
  229:	P:set_property(username, "intel"),
<a name="230"></a>  230:	P:set_property(password, "intel"),
  231:	P:set_property(contentmatch, "123456"),
  232:	P:set_property(ftpproxy, ""),
  233:	P:set_property(mode, false),
  234:	P:set_property(pcheckcontent, "nil"),
  235:	P:set_property(proxyusername, ""),
  236:	P:set_property(proxypassword, ""),
  237:	P:set_property(ftpserver, "192.168.0.1"),
  238:	P:set_property(file, "1.txt"),
  239:	
<a name="240"></a>  240:	P:update(),
  241:	
  242:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  243:	
  244:	{comment, Good}.
  245:
<a name=error_proxy>  246:<b>error_proxy</b></a>(_Config) -&gt; 
  247:	P = ftp_monitor:new(),
  248:	P:set_property(timeout, 10),
  249:	P:set_property(username, "intel"),
<a name="250"></a>  250:	P:set_property(password, "intel"),
  251:	P:set_property(contentmatch, ""),
  252:	P:set_property(ftpproxy, "192.168.0.224:3128"),
  253:	P:set_property(mode, false),
  254:	P:set_property(pcheckcontent, "nil"),
  255:	P:set_property(proxyusername, "me"),
  256:	P:set_property(proxypassword, "me"),
  257:	P:set_property(ftpserver, "192.168.0.1"),
  258:	P:set_property(file, "1.txt"),
  259:	
<a name="260"></a>  260:	P:update(),
  261:	
  262:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  263:	
  264:	{comment, Good}.	
  265:
<a name=error_proxyuser>  266:<b>error_proxyuser</b></a>(_Config)  -&gt;
  267:	P = ftp_monitor:new(),
  268:	P:set_property(timeout, 10),
  269:	P:set_property(username, "intel"),
<a name="270"></a>  270:	P:set_property(password, "intel"),
  271:	P:set_property(contentmatch, ""),
  272:	P:set_property(ftpproxy, "192.168.0.225:3128"),
  273:	P:set_property(mode, false),
  274:	P:set_property(pcheckcontent, "nil"),
  275:	P:set_property(proxyusername, "m"),
  276:	P:set_property(proxypassword, "me"),
  277:	P:set_property(ftpserver, "192.168.0.1"),
  278:	P:set_property(file, "1.txt"),
  279:	
<a name="280"></a>  280:	P:update(),
  281:	
  282:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  283:	
  284:	{comment, Good}.	
  285:
<a name=error_proxypass>  286:<b>error_proxypass</b></a>(_Config) -&gt;
  287:	P = ftp_monitor:new(),
  288:	P:set_property(timeout, 10),
  289:	P:set_property(username, "intel"),
<a name="290"></a>  290:	P:set_property(password, "intel"),
  291:	P:set_property(contentmatch, ""),
  292:	P:set_property(ftpproxy, "192.168.0.225:3128"),
  293:	P:set_property(mode, false),
  294:	P:set_property(pcheckcontent, "nil"),
  295:	P:set_property(proxyusername, "me"),
  296:	P:set_property(proxypassword, "m"),
  297:	P:set_property(ftpserver, "192.168.0.1"),
  298:	P:set_property(file, "1.txt"),
  299:	
<a name="300"></a>  300:	P:update(),
  301:	
  302:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  303:	
  304:	{comment, Good}.	
  305:
<a name=error_file>  306:<b>error_file</b></a>(_Config) -&gt;
  307:	P = ftp_monitor:new(),
  308:	P:set_property(timeout, 10),
  309:	P:set_property(username, "intel"),
<a name="310"></a>  310:	P:set_property(password, "intel"),
  311:	P:set_property(contentmatch, ""),
  312:	P:set_property(ftpproxy, ""),
  313:	P:set_property(mode, false),
  314:	P:set_property(pcheckcontent, "nil"),
  315:	P:set_property(proxyusername, ""),
  316:	P:set_property(proxypassword, ""),
  317:	P:set_property(ftpserver, "192.168.0.1"),
  318:	P:set_property(file, "2.txt"),
  319:	
<a name="320"></a>  320:	P:update(),
  321:	
  322:	{ok, {state_string, Good}} = P:get_attribute(state_string),
  323:	
  324:	{comment, Good}.
  325:	
</pre>
<hr size=1><i>The transformation of this file (326 lines) took 0.00 seconds</i><br>
</body>
</html>
